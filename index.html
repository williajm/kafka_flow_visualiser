<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kafka Flow Visualizer - Interactive Learning Tool</title>
    <meta name="description" content="Learn Apache Kafka concepts through beautiful, interactive visualizations">

    <!-- Google Fonts - Organic Typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">

    <!-- GSAP Animation Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"
            integrity="sha384-g4NTh/Iv5PPU4xPyhEWqPcwtNXOvdaDI8LLnyYfyNZOjKJeYQyjzQ9X5275eBjpt"
            crossorigin="anonymous"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open lessons menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 12h18M3 6h18M3 18h18"/>
                </svg>
            </button>
            <h1 class="logo">Kafka Flow Visualizer</h1>
            <nav class="header-nav">
                <a href="https://github.com/williajm/kafka_flow_visualiser" target="_blank" class="nav-link">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    GitHub
                </a>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Sidebar Overlay (for mobile) -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <nav class="lesson-nav">
                <h2 class="nav-title">Lessons</h2>
                <ul class="lesson-list" id="lessonList">
                    <li class="lesson-item active" data-lesson="basics">
                        <span class="lesson-number">1</span>
                        <span class="lesson-name">The Basics</span>
                        <span class="lesson-status"></span>
                    </li>
                    <li class="lesson-item locked" data-lesson="partitions">
                        <span class="lesson-number">2</span>
                        <span class="lesson-name">Partitions</span>
                        <span class="lesson-status"></span>
                    </li>
                    <li class="lesson-item locked" data-lesson="partitions-keys">
                        <span class="lesson-number">3</span>
                        <span class="lesson-name">Partitions with Keys</span>
                        <span class="lesson-status"></span>
                    </li>
                    <li class="lesson-item locked" data-lesson="consumer-groups">
                        <span class="lesson-number">4</span>
                        <span class="lesson-name">Consumer Groups</span>
                        <span class="lesson-status"></span>
                    </li>
                    <li class="lesson-item locked" data-lesson="offsets">
                        <span class="lesson-number">5</span>
                        <span class="lesson-name">Offsets & Lag</span>
                        <span class="lesson-status"></span>
                    </li>
                    <li class="lesson-item locked" data-lesson="rebalancing">
                        <span class="lesson-number">6</span>
                        <span class="lesson-name">Rebalancing</span>
                        <span class="lesson-status"></span>
                    </li>
                </ul>
            </nav>

            <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 4L14 10L6 16" />
                </svg>
            </button>
        </aside>

        <!-- Main Canvas Area -->
        <main class="main-content">
            <div class="canvas-container">
                <svg id="canvas" class="visualization-canvas" viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid meet">
                    <defs>
                        <!-- Gradients - Organic Earth Theme -->
                        <linearGradient id="producerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#C2785C;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#A65D42;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="topicGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#7B9E7B;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#5C7A5C;stop-opacity:1" />
                        </linearGradient>
                        <linearGradient id="consumerGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#6B9E9E;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#4A7A7A;stop-opacity:1" />
                        </linearGradient>

                        <!-- Filters for glow effects -->
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>

                    <!-- Content will be injected by JavaScript -->
                    <g id="visualization"></g>
                </svg>

                <!-- Lesson Description Overlay -->
                <div class="lesson-description" id="lessonDescription">
                    <h2 class="lesson-title"></h2>
                    <p class="lesson-text"></p>
                </div>
            </div>
        </main>

        <!-- Info Panel (slides in from right) -->
        <aside class="info-panel" id="infoPanel">
            <button class="info-panel-close" id="infoPanelClose" aria-label="Close">Ã—</button>
            <div class="info-panel-content" id="infoPanelContent">
                <!-- Dynamic content injected by JavaScript -->
            </div>
        </aside>
    </div>

    <!-- Control Panel (floating) -->
    <div class="controls" id="controls">
        <button class="control-btn control-btn-primary" id="playPauseBtn" aria-label="Play/Pause">
            <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
            </svg>
            <svg class="pause-icon hidden" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
            </svg>
        </button>
        <button class="control-btn" id="resetBtn" aria-label="Reset">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
                <path d="M21 3v5h-5"/>
            </svg>
        </button>
        <div class="control-divider"></div>
        <div class="speed-control">
            <label for="speedSlider">Speed:</label>
            <input type="range" id="speedSlider" min="0.5" max="3" step="0.5" value="1">
            <span id="speedValue">1x</span>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
